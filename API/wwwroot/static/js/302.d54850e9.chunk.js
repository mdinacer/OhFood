"use strict";(self.webpackChunkoh_food=self.webpackChunkoh_food||[]).push([[302],{18009:function(e,n,t){t.d(n,{Z:function(){return x}});var i=t(1413),r=t(72791),l=t(5849),s=t(5574),o=t(77386),a=t(4899),d=t(31701),c=t(65661),u=t(55931),f=t(80184),h=r.forwardRef((function(e,n){return(0,f.jsx)(u.Z,(0,i.Z)({direction:"up",ref:n},e))}));function x(e){var n=e.open,t=e.title,i=e.body,r=e.okText,u=void 0===r?"Ok":r,x=e.cancelText,Z=void 0===x?"Cancel":x,m=e.onClose;return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(s.Z,{open:n,TransitionComponent:h,keepMounted:!0,onClose:m,"aria-describedby":"alert-dialog-slide-description",children:[(0,f.jsx)(c.Z,{children:t}),(0,f.jsx)(a.Z,{children:(0,f.jsx)(d.Z,{id:"alert-dialog-slide-description",children:i})}),(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(l.Z,{size:"small",variant:"outlined",onClick:function(){return m(!1)},children:Z}),(0,f.jsx)(l.Z,{size:"small",variant:"contained",onClick:function(){return m(!0)},children:u})]})]})})}},96302:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var i=t(1413),r=t(29439),l=t(74223),s=t(80184),o=(0,l.Z)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),a=t(38820),d=t(94446),c=t(68870),u=t(4567),f=t(11413),h=t(4708),x=t(10266),Z=t(53767),m=t(5849),p=t(81153),j=t(4841),v=t(94721),g=t(68586),b=t(18060),y=t(60627),C=t(72791),k=t(43504),D=t(30260),w=t(18009),A=t(76595),S=t(15861),E=t(87757),z=t.n(E),N=t(93006),P=t(61134);function F(e){var n,t,r,l=e.address,o=e.onCancel,a=e.onSubmit,u=(0,P.cI)({mode:"all"}),f=u.register,h=u.handleSubmit,Z=u.reset,p=u.setValue,j=u.formState,v=j.isSubmitting,g=j.errors,b=j.isValid;function y(){return(y=(0,S.Z)(z().mark((function e(n){var t;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=(0,i.Z)((0,i.Z)({},n),{},{id:l?l.id:0,isDefault:!1}),!l){e.next=7;break}return e.next=5,D.Z.Profile.updateAddress(t);case 5:e.next=9;break;case 7:return e.next=9,D.Z.Profile.createAddress(t);case 9:a(t),Z(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:return e.prev=16,o(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})))).apply(this,arguments)}(0,C.useEffect)((function(){l&&(p("fullName",l.fullName),p("address1",l.address1),p("city",l.city))}),[l,p]);return(0,s.jsx)(x.Z,{children:(0,s.jsxs)(c.Z,{component:"form",onSubmit:h((function(e){return y.apply(this,arguments)})),noValidate:!0,sx:{mt:1},children:[(0,s.jsx)(N.Z,(0,i.Z)((0,i.Z)({margin:"normal",fullWidth:!0,label:"Full Name",autoComplete:"off"},f("fullName",{required:"Full Name is required"})),{},{error:!!g.fullName,helperText:null===g||void 0===g||null===(n=g.fullName)||void 0===n?void 0:n.message})),(0,s.jsx)(N.Z,(0,i.Z)((0,i.Z)({margin:"normal",fullWidth:!0,label:"Address",autoComplete:"off"},f("address1",{required:"Address is required"})),{},{error:!!g.address1,helperText:null===g||void 0===g||null===(t=g.address1)||void 0===t?void 0:t.message})),(0,s.jsx)(N.Z,(0,i.Z)((0,i.Z)({margin:"normal",fullWidth:!0,label:"City",autoComplete:"off"},f("city",{required:"City is required"})),{},{error:!!g.city,helperText:null===g||void 0===g||null===(r=g.city)||void 0===r?void 0:r.message})),(0,s.jsx)(d.Z,{loading:v,disabled:!b,type:"submit",fullWidth:!0,disableElevation:!0,variant:"contained",sx:{mt:2},children:"Save"}),(0,s.jsx)(m.Z,{fullWidth:!0,onClick:function(){Z(),o(!1)},color:"inherit",variant:"outlined",sx:{mt:1,mb:2},children:"Cancel"})]})})}var T={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:400,minWidth:300,bgcolor:"background.paper",borderRadius:3,boxShadow:24,py:2};function B(){var e=(0,C.useState)([]),n=(0,r.Z)(e,2),t=n[0],l=n[1],S=(0,C.useState)(!1),E=(0,r.Z)(S,2),z=E[0],N=E[1],P=(0,C.useState)(!1),B=(0,r.Z)(P,2),V=B[0],W=B[1],q=(0,C.useState)({addressForm:!1,deleteDialog:!1}),I=(0,r.Z)(q,2),M=I[0],L=I[1],H=(0,C.useState)(null),O=(0,r.Z)(H,2),R=O[0],_=O[1];(0,C.useEffect)((function(){return N(!0),D.Z.Profile.fetchAddresses().then((function(e){l(e)})).catch((function(e){return console.log(e)})).finally((function(){return N(!1)})),function(){return l([])}}),[]);var U=function(e){return L((0,i.Z)((0,i.Z)({},M),{},{addressForm:e}))},Y=function(e){return L((0,i.Z)((0,i.Z)({},M),{},{deleteDialog:e}))};var G=function(e){W(!0),D.Z.Profile.deleteAddress(e).then((function(n){l(t.filter((function(n){return n.id!==e})))})).catch((function(e){return console.log(e)})).finally((function(){_(null),W(!1)}))},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading";return(0,s.jsx)(c.Z,{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:(0,s.jsx)(u.Z,{variant:"caption",children:e})})};return(0,s.jsxs)(f.Z,{theme:A.ib,children:[(0,s.jsx)(h.ZP,{}),(0,s.jsxs)(c.Z,{sx:{height:"100%",width:"100%",backgroundColor:"#EEEEEE",minHeight:"100Vh",color:"black"},children:[(0,s.jsxs)(x.Z,{sx:{py:{md:5,xs:2},pt:{md:10,xs:2}},children:[(0,s.jsxs)(Z.Z,{sx:{width:"100%",pb:4},display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,s.jsx)(u.Z,{variant:"h4",component:"h1",sx:{textTransform:"uppercase"},children:"Address Book"}),(0,s.jsx)(m.Z,{variant:"text",color:"inherit",size:"small",component:k.rU,to:"/profile",children:"Back to profile"})]}),z&&0===t.length&&J("Loading Addresses"),!z&&0===t.length&&J("Your address book is empty"),t.length>0&&(0,s.jsx)(x.Z,{children:(0,s.jsx)(p.ZP,{container:!0,spacing:2,children:t.map((function(e){return(0,s.jsx)(p.ZP,{item:!0,md:4,xs:12,children:(0,s.jsx)(j.Z,{sx:{py:2,height:"100%"},children:(0,s.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,s.jsxs)(Z.Z,{sx:{flex:"0 1 auto"},children:[(0,s.jsx)(u.Z,{variant:"caption",children:"Name"}),(0,s.jsx)(u.Z,{variant:"body2",gutterBottom:!0,children:e.fullName})]}),(0,s.jsxs)(Z.Z,{sx:{flex:"1 1 auto",height:"100%"},children:[(0,s.jsx)(u.Z,{variant:"caption",children:"Address"}),(0,s.jsx)(u.Z,{variant:"subtitle1",gutterBottom:!0,children:e.address1})]}),(0,s.jsxs)(Z.Z,{sx:{flex:"0 1 auto"},children:[(0,s.jsx)(u.Z,{variant:"caption",children:"City"}),(0,s.jsx)(u.Z,{variant:"body1",gutterBottom:!0,children:e.city})]}),(0,s.jsx)(v.Z,{}),(0,s.jsxs)(Z.Z,{direction:"row",sx:{flex:"0 1 auto"},justifyContent:"space-between",children:[(0,s.jsx)(d.Z,{loading:V,disabled:e.isDefault,size:"small",color:"inherit",variant:"text",onClick:function(){return n=e.id,W(!0),void D.Z.Profile.setDefaultAddress(n).then((function(e){var r=t.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isDefault:e.id===n})}));l(r)})).catch((function(e){return console.log(e)})).finally((function(){return W(!1)}));var n},children:"Set Default"}),(0,s.jsx)(d.Z,{loading:V,startIcon:(0,s.jsx)(a.Z,{}),size:"small",color:"inherit",variant:"text",onClick:function(){_(e),U(!0)},children:"Edit"}),(0,s.jsx)(d.Z,{loading:V,disabled:e.isDefault,startIcon:(0,s.jsx)(o,{}),size:"small",color:"error",variant:"text",onClick:function(){_(e),Y(!0)},children:"Delete"})]})]})})},e.id)}))})})]}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:M.addressForm,onClose:function(){return U(!1)},closeAfterTransition:!0,BackdropComponent:b.Z,BackdropProps:{timeout:500},children:(0,s.jsx)(y.Z,{in:M.addressForm,children:(0,s.jsx)(c.Z,{sx:T,children:(0,s.jsx)(F,{onSubmit:function(e){if(R){W(!0);var n=t.indexOf(R),r=t;r[n]=(0,i.Z)({},e),l(r),W(!1)}},onCancel:U,address:R})})})}),(0,s.jsx)(w.Z,{open:M.deleteDialog,title:"Delete Address",onClose:function(e){Y(!1),e&&R&&(console.log("Deleting Address"),G(R.id))},body:"Are you sure you want to delete this element?"})]})]})]})}},38820:function(e,n,t){var i=t(74223),r=t(80184);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")}}]);
//# sourceMappingURL=302.d54850e9.chunk.js.map