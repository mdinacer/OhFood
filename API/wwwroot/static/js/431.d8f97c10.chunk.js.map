{"version":3,"file":"static/js/431.d8f97c10.chunk.js","mappings":"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","sources":["app/components/AppTextInput.tsx","app/components/AppDropzone.tsx","features/profile/profileValidation.ts","features/profile/ProfileForm.tsx","features/profile/ProfileSettings.tsx"],"sourcesContent":["import { TextField } from \"@mui/material\";\nimport { useController, UseControllerProps } from \"react-hook-form\";\n\ninterface Props extends UseControllerProps {\n    label: string;\n    multiline?: boolean;\n    rows?: number;\n    type?: string;\n}\n\nexport default function AppTextInput(props: Props) {\n    const {fieldState, field} = useController({...props, defaultValue: ''})\n    return (\n        <TextField \n            {...props}\n            {...field}\n            multiline={props.multiline}\n            rows={props.rows}\n            type={props.type}\n            fullWidth\n            size={\"small\"}\n            variant='outlined'\n            error={!!fieldState.error}\n            helperText={fieldState.error?.message}\n        />\n    )\n}","import {UploadFile} from '@mui/icons-material';\nimport {Box, FormControl, FormHelperText, Typography} from '@mui/material';\nimport {useCallback} from 'react'\nimport {useDropzone} from 'react-dropzone'\nimport {useController, UseControllerProps} from 'react-hook-form'\n\ninterface Props extends UseControllerProps {\n}\n\nexport default function AppDropzone(props: Props) {\n    const {fieldState, field} = useController({...props, defaultValue: null});\n\n    const dzStyles = {\n        display: 'flex',\n        border: 'dashed 3px #eee',\n        borderColor: '#eee',\n        borderRadius: '5px',\n        paddingTop: '30px',\n        alignItems: 'center',\n    }\n\n    const dzActive = {\n        borderColor: 'green'\n    }\n\n    const onDrop = useCallback(acceptedFiles => {\n        acceptedFiles[0] = Object.assign(acceptedFiles[0],\n            {preview: URL.createObjectURL(acceptedFiles[0])});\n        field.onChange(acceptedFiles[0]);\n    }, [field])\n    const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop})\n\n    return (\n        <Box  component={\"div\"} {...getRootProps()}>\n            <FormControl sx={{p:2, height:\"200px\", width:\"100%\"}} error={!!fieldState.error} style={isDragActive ? {...dzStyles, ...dzActive} : dzStyles}>\n                <input {...getInputProps()} />\n                <UploadFile sx={{fontSize: '100px'}}/>\n                <Typography variant='h6'>Drop image here</Typography>\n                <FormHelperText>{fieldState.error?.message}</FormHelperText>\n            </FormControl>\n        </Box>\n    )\n}","import * as yup from 'yup';\n\nexport const profileValidationSchema = yup.object({\n    firstName: yup.string().required(),\n    lastName: yup.string().required(),\n    phone1: yup.string().required(),\n    phone2: yup.string(),\n    file: yup.mixed().when('pictureUrl', {\n        is: (value: string) => !value,\n        then: yup.mixed().required('Please provide an image')\n    })\n})","import {Box, Button, Grid} from \"@mui/material\";\nimport AppTextInput from \"../../app/components/AppTextInput\";\nimport AppDropzone from \"../../app/components/AppDropzone\";\nimport {useAppDispatch, useAppSelector} from \"../../app/store/configureStore\";\nimport {FieldValues, useForm} from \"react-hook-form\";\nimport {useEffect} from \"react\";\nimport {profileValidationSchema} from \"./profileValidation\";\nimport {yupResolver} from \"@hookform/resolvers/yup\";\nimport agent from \"../../app/api/agent\";\nimport {LoadingButton} from \"@mui/lab\";\nimport {Link, useNavigate} from \"react-router-dom\";\nimport {setProfile} from \"../../app/slices/accountSlice\";\n\n\nexport default function ProfileForm() {\n    const {control, reset, handleSubmit, watch, formState: {isDirty, isSubmitting}} = useForm({\n        mode: 'all',\n        resolver: yupResolver<any>(profileValidationSchema)\n    });\n    const {profile} = useAppSelector(state => state.account);\n    const navigate = useNavigate();\n    const watchFile = watch('file', null);\n    const dispatch = useAppDispatch();\n\n    useEffect(() => {\n        if (profile && !watchFile && !isDirty) reset({...profile, phone2: profile.phone2 ?? \"\"});\n        return () => {\n            if (watchFile) URL.revokeObjectURL(watchFile.preview);\n        }\n    }, [profile, reset, watchFile, isDirty]);\n\n    async function handleSubmitData(data: FieldValues) {\n        console.log(\"submitting\")\n        try {\n            agent.Profile.updateProfile(data)\n                .then(response =>\n                {\n                    dispatch(setProfile(response))\n                    navigate(\"/profile\");\n                })\n                .catch(error => console.log(error))\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    return (\n        <Box component={\"form\"} onSubmit={handleSubmit(handleSubmitData)}>\n            <Grid container spacing={2}>\n                <Grid item md={6} xs={12}>\n                    <AppTextInput control={control} name='firstName' label='First Name'/>\n                </Grid>\n                <Grid item md={6} xs={12}>\n                    <AppTextInput control={control} name='lastName' label='Last Name'/>\n                </Grid>\n\n                <Grid item md={6} xs={12}>\n                    <AppTextInput control={control} name='phone1' label='Mobile'/>\n                </Grid>\n\n                <Grid item md={6} xs={12}>\n                    <AppTextInput control={control} name='phone2' label='Mobile'/>\n                </Grid>\n\n                <Grid item xs={12}>\n                    <Grid container spacing={2}>\n                        <Grid item xs={12} md={6}>\n                            <Box sx={{\n                                width: \"100%\",\n                            }}>\n                                <AppDropzone control={control} name='file'/>\n                            </Box>\n                        </Grid>\n                        <Grid item xs={12} md={6}>\n                            <Box sx={{\n                                display: \"flex\",\n                                alignItems: \"center\",\n                                justifyContent: \"center\",\n                                width: \"100%\",\n                                height: \"100%\"\n                            }}>\n                                {watchFile ? (\n                                    <Box component={\"img\"} sx={{borderRadius:3}} src={watchFile.preview} alt='preview' style={{maxHeight: 200}}/>\n                                ) : (\n                                    <Box component={\"img\"} sx={{borderRadius:3, objectFit:\"cover\", objectPosition:\"center\"}} src={profile?.pictureUrl} alt={profile?.firstName} style={{maxHeight: 200}}/>\n                                )}\n                            </Box>\n                        </Grid>\n\n\n                    </Grid>\n\n                </Grid>\n\n                <Grid item xs={12}>\n                    <Box display='flex' alignItems={\"center\"}  sx={{ mt: 3, justifyContent:{xs:\"space-evenly\", md:\"flex-end\"} }}>\n                        <Button sx={{mx:1, width:{xs:\"100%\", md:\"95px\"}}} component={Link} to={\"/profile\"} variant='outlined' color='inherit'>Cancel</Button>\n                        <LoadingButton sx={{color:\"#FFF\", fontWeight:\"bold\", width:{xs:\"100%\", md:\"95px\"}}} loading={isSubmitting} type='submit' variant='contained' disableElevation color='primary'>Save</LoadingButton>\n                    </Box>\n                </Grid>\n\n            </Grid>\n        </Box>\n    )\n};\n","import {ThemeProvider} from \"@emotion/react\";\nimport {Box, Container, CssBaseline, Paper, Typography} from \"@mui/material\";\nimport {LightTheme} from \"../../app/layout/App\";\nimport {useAppSelector} from \"../../app/store/configureStore\";\nimport ProfileForm from \"./ProfileForm\";\n\nexport default function ProfileSettings() {\n    const {user, profile} = useAppSelector(state => state.account);\n\n\n    if (!user || !profile) return <div>No User</div>\n    return (\n        <ThemeProvider theme={LightTheme}>\n            <CssBaseline/>\n            <Box sx={{\n                pt: {md: \"60px\", xs: 1},\n                pb: {xs: \"60px\", md: 1},\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                minHeight: \"100vh\",\n                width: \"100%\",\n                backgroundColor: \"#EEEEEE\",\n            }}>\n                <Container sx={{\n                    px: {xs: 0, md: 7},\n                    display: \"flex\",\n                    justifyContent: \"center\",\n                    alignItems: \"center\",\n                    flexDirection: \"column\"\n                }}>\n                    <Paper sx={{\n                        p: 3,\n                        width: \"100%\",\n                        height: \"100%\",\n                        maxWidth: \"800px\",\n                        borderRadius: {xs: 0, md: 3},\n\n                    }}>\n                        <Typography variant=\"h6\" sx={{mb: 3}}>Profile Settings</Typography>\n                        <ProfileForm/>\n                    </Paper>\n\n\n                </Container>\n\n            </Box>\n        </ThemeProvider>\n    )\n};\n"],"names":["AppTextInput","props","useController","defaultValue","fieldState","field","multiline","rows","type","fullWidth","size","variant","error","helperText","message","AppDropzone","dzStyles","display","border","borderColor","borderRadius","paddingTop","alignItems","onDrop","useCallback","acceptedFiles","Object","assign","preview","URL","createObjectURL","onChange","useDropzone","getRootProps","getInputProps","isDragActive","Box","component","FormControl","sx","p","height","width","style","UploadFile","fontSize","Typography","FormHelperText","profileValidationSchema","yup","firstName","required","lastName","phone1","phone2","file","when","is","value","then","ProfileForm","useForm","mode","resolver","yupResolver","control","reset","handleSubmit","watch","formState","isDirty","isSubmitting","profile","useAppSelector","state","account","navigate","useNavigate","watchFile","dispatch","useAppDispatch","data","console","log","agent","response","setProfile","catch","useEffect","revokeObjectURL","onSubmit","Grid","container","spacing","item","md","xs","name","label","justifyContent","src","alt","maxHeight","objectFit","objectPosition","pictureUrl","mt","Button","mx","Link","to","color","LoadingButton","fontWeight","loading","disableElevation","ProfileSettings","user","theme","LightTheme","CssBaseline","pt","pb","minHeight","backgroundColor","Container","px","flexDirection","Paper","maxWidth","mb"],"sourceRoot":""}