"use strict";(self.webpackChunkoh_food=self.webpackChunkoh_food||[]).push([[78],{1505:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(1413),i=r(93006),a=r(61134),o=r(80184);function s(e){var t,r=(0,a.bc)((0,n.Z)((0,n.Z)({},e),{},{defaultValue:""})),s=r.fieldState,l=r.field;return(0,o.jsx)(i.Z,(0,n.Z)((0,n.Z)((0,n.Z)({},e),l),{},{multiline:e.multiline,rows:e.rows,type:e.type,fullWidth:!0,size:"small",variant:"outlined",error:!!s.error,helperText:null===(t=s.error)||void 0===t?void 0:t.message}))}},81078:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var n=r(45987),i=r(15861),a=r(1413),o=r(29439),s=r(87757),l=r.n(s),c=r(68870),d=r(4567),u=r(10266),h=r(4841),x=r(99947),m=r(85982),f=r(36053),p=r(5849),v=r(72791),Z=r(61134),g=r(81153),j=r(1505),b=r(25801),w=r(13034),y=r(80184);function P(e){var t=(0,Z.bc)((0,a.Z)((0,a.Z)({},e),{},{defaultValue:!1})).field;return(0,y.jsx)(b.Z,{control:(0,y.jsx)(w.Z,(0,a.Z)((0,a.Z)({},t),{},{checked:t.value,color:"secondary",disabled:e.disabled})),label:e.label})}function S(){var e=(0,Z.Gc)(),t=e.control,r=e.formState;return(0,y.jsxs)(c.Z,{maxWidth:800,sx:{mx:"auto"},children:[(0,y.jsx)(d.Z,{variant:"h6",sx:{mb:3},children:"Shipping address"}),(0,y.jsxs)(g.ZP,{container:!0,spacing:3,children:[(0,y.jsx)(g.ZP,{item:!0,xs:12,sm:12,children:(0,y.jsx)(j.Z,{control:t,name:"fullName",label:"Full name"})}),(0,y.jsx)(g.ZP,{item:!0,xs:12,md:8,children:(0,y.jsx)(j.Z,{control:t,name:"address1",label:"Address"})}),(0,y.jsx)(g.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,y.jsx)(j.Z,{control:t,name:"city",label:"City"})}),(0,y.jsx)(g.ZP,{item:!0,xs:12,children:(0,y.jsx)(P,{disabled:!r.isDirty,name:"saveAddress",label:"Save as the default address",control:t})})]})]})}var A=r(43236),C=r(52411),I=r(94721),k=r(53767),R=r(66620),V=r(92675),N=r(51365),W=r(32068);function q(){var e,t=(0,R.CG)((function(e){return e.basket})),r=t.basket,n=t.status,i=null!==(e=null===r||void 0===r?void 0:r.items.reduce((function(e,t){return e+t.quantity*t.price}),0))&&void 0!==e?e:0,a=(0,R.TL)();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.Z,{variant:"h6",gutterBottom:!0,children:"Order summary"}),r&&(0,y.jsx)(A.Z,{children:r.items.map((function(e){return(0,y.jsx)(C.ZP,{sx:{mb:0},children:(0,y.jsxs)(g.ZP,{container:!0,spacing:2,rowSpacing:0,children:[(0,y.jsx)(g.ZP,{md:2,xs:0,item:!0,sx:{overflow:"hidden"},display:"flex",alignItems:"center",justifyContent:"center",children:(0,y.jsx)(c.Z,{component:"img",src:e.pictureUrl,alt:e.name,sx:{height:"50px",width:"50px",objectFit:"contain",objectPosition:"center"}})}),(0,y.jsxs)(g.ZP,{item:!0,md:5,xs:8,display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"column",columnGap:3,children:[(0,y.jsx)(d.Z,{variant:"caption",children:e.category}),(0,y.jsx)(d.Z,{variant:"subtitle1",children:e.name})]}),(0,y.jsx)(g.ZP,{item:!0,md:3,xs:6,display:"flex",alignItems:"center",justifyContent:"center",children:(0,y.jsx)(N.Z,{quantity:e.quantity,increase:function(){return a((0,W.JW)({productId:e.productId}))},decrease:function(){return a((0,W.di)({productId:e.productId,quantity:1,name:"rem"}))},isRow:!0,minValue:1,loading:n.includes("pending")})}),(0,y.jsx)(g.ZP,{item:!0,md:2,xs:6,sx:{overflow:"hidden"},display:"flex",alignItems:"center",justifyContent:"center",children:(0,y.jsx)(d.Z,{textAlign:"center",children:(0,V.O)(e.price*e.quantity,"$")})})]})},e.productId)}))}),(0,y.jsx)(I.Z,{}),(0,y.jsxs)(g.ZP,{container:!0,children:[(0,y.jsx)(g.ZP,{item:!0,md:6,xs:0}),(0,y.jsx)(g.ZP,{item:!0,xs:12,md:6,children:(0,y.jsx)(u.Z,{children:(0,y.jsxs)(A.Z,{dense:!0,children:[(0,y.jsx)(C.ZP,{children:(0,y.jsxs)(k.Z,{width:"100%",direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,y.jsx)(d.Z,{variant:"caption",children:"Subtotal"}),(0,y.jsx)(d.Z,{variant:"subtitle1",children:(0,V.O)(i,"$")})]})}),(0,y.jsx)(C.ZP,{children:(0,y.jsxs)(k.Z,{width:"100%",direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,y.jsx)(d.Z,{variant:"caption",children:"Delivery Cost"}),(0,y.jsx)(d.Z,{variant:"subtitle1",children:(0,V.O)(30,"$")})]})}),(0,y.jsx)(C.ZP,{children:(0,y.jsxs)(k.Z,{width:"100%",direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,y.jsx)(d.Z,{variant:"caption",children:"Total"}),(0,y.jsx)(d.Z,{variant:"subtitle1",children:(0,V.O)(i+30,"$")})]})})]})})})]})]})}var D=r(24388),T=r(62797),L=T.Ry({fullName:T.Z_().required("Please enter your name"),address1:T.Z_().required("Please enter your address"),city:T.Z_().required()}),O=r(30260),B=r(94446),F=r(43504),M=["saveAddress"],U=["Address","Review","Receipt"];function _(){var e=(0,v.useState)(0),t=(0,o.Z)(e,2),r=t[0],s=t[1],g=(0,v.useState)(0),j=(0,o.Z)(g,2),b=j[0],w=j[1],P=(0,v.useState)(!1),A=(0,o.Z)(P,2),C=A[0],I=A[1],k=(0,R.TL)();var V=(0,Z.cI)({mode:"all",resolver:(0,D.X)(L)});function N(e){return T.apply(this,arguments)}function T(){return(T=(0,i.Z)(l().mark((function e(t){var i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),i=t.saveAddress,a=(0,n.Z)(t,M),e.prev=2,e.next=5,O.Z.Orders.create({saveAddress:i,shippingAddress:a});case 5:o=e.sent,w(o),s(r+1),k((0,W.RT)()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:return e.prev=14,I(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))).apply(this,arguments)}(0,v.useEffect)((function(){O.Z.Profile.fetchDefaultAddress().then((function(e){e&&V.reset((0,a.Z)((0,a.Z)((0,a.Z)({},V.getValues()),e),{},{saveAddress:!1}))}))}),[V]);var _=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==r){e.next=5;break}return e.next=3,N(t);case 3:e.next=6;break;case 5:s(r+1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,y.jsx)(c.Z,{className:"payment",sx:{pb:{xs:10,md:1},pt:{xs:1,md:7}},children:(0,y.jsx)(u.Z,{children:(0,y.jsx)(Z.RV,(0,a.Z)((0,a.Z)({},V),{},{children:(0,y.jsxs)(h.Z,{variant:"outlined",sx:{maxWidth:800,my:{xs:1,md:6},mx:"auto",p:{xs:2,md:3},backgroundColor:"rgba(0,0,0,0.5)"},children:[(0,y.jsx)(d.Z,{component:"h1",variant:"h4",align:"center",children:"Order"}),(0,y.jsx)(x.Z,{activeStep:r,sx:{pt:3,pb:5},children:U.map((function(e){return(0,y.jsx)(m.Z,{children:(0,y.jsx)(f.Z,{children:e})},e)}))}),(0,y.jsx)(y.Fragment,{children:r===U.length?(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(d.Z,{variant:"subtitle1",children:["Your order number is #",b,". We have emailed your order confirmation, and will not send you an update when your order has shipped!"]})}):(0,y.jsxs)("form",{onSubmit:V.handleSubmit(_),children:[function(e){switch(e){case 0:return(0,y.jsx)(S,{});case 1:return(0,y.jsx)(q,{});case 2:return(0,y.jsx)(c.Z,{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:(0,y.jsx)(d.Z,{textAlign:"center",children:"You order has been sent, You will be notified on confirmation and delivery."})});default:throw new Error("Unknown step")}}(r),(0,y.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[0!==r&&(0,y.jsx)(p.Z,{onClick:function(){s(r-1)},sx:{mt:3,ml:1},children:"Back"}),2!==r?(0,y.jsx)(B.Z,{loading:C,disabled:!V.formState.isValid,variant:"contained",type:"submit",sx:{mt:3,ml:1},children:1===r?"Place order":"Next"}):(0,y.jsx)(p.Z,{variant:"contained",sx:{mt:3,ml:1},component:F.rU,to:"/",children:"Home"})]})]})})]})}))})})}},24388:function(e,t,r){r.d(t,{X:function(){return a}});var n=r(41768),i=r(61134),a=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),function(a,o,s){try{return Promise.resolve(function(i,l){try{var c=(t.context,Promise.resolve(e["sync"===r.mode?"validateSync":"validate"](a,Object.assign({abortEarly:!1},t,{context:o}))).then((function(e){return s.shouldUseNativeValidation&&(0,n.M)({},s),{values:e,errors:{}}})))}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,(function(e){return{values:{},errors:(0,n.D)((t=e,r=!s.shouldUseNativeValidation&&"all"===s.criteriaMode,(t.inner||[]).reduce((function(e,t){if(e[t.path]||(e[t.path]={message:t.message,type:t.type}),r){var n=e[t.path].types,a=n&&n[t.type];e[t.path]=(0,i.KN)(t.path,r,e,t.type,a?[].concat(a,t.message):t.message)}return e}),{})),s)};var t,r})))}catch(l){return Promise.reject(l)}}}},94721:function(e,t,r){var n=r(63366),i=r(87462),a=r(72791),o=(r(52007),r(28182)),s=r(90767),l=r(12065),c=r(47630),d=r(31402),u=r(90133),h=r(80184),x=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],m=(0,c.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})((function(e){var t=e.theme,r=e.ownerState;return(0,i.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:t.palette.divider,borderBottomWidth:"thin"},r.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},r.light&&{borderColor:(0,l.Fq)(t.palette.divider,.08)},"inset"===r.variant&&{marginLeft:72},"middle"===r.variant&&"horizontal"===r.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===r.variant&&"vertical"===r.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===r.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},r.flexItem&&{alignSelf:"stretch",height:"auto"})}),(function(e){var t=e.theme,r=e.ownerState;return(0,i.Z)({},r.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:"thin solid ".concat(t.palette.divider),top:"50%",content:'""',transform:"translateY(50%)"}})}),(function(e){var t=e.theme,r=e.ownerState;return(0,i.Z)({},r.children&&"vertical"===r.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:"thin solid ".concat(t.palette.divider),transform:"translateX(0%)"}})}),(function(e){var t=e.ownerState;return(0,i.Z)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),f=(0,c.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:function(e,t){var r=e.ownerState;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})((function(e){var t=e.theme,r=e.ownerState;return(0,i.Z)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===r.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})})),p=a.forwardRef((function(e,t){var r=(0,d.Z)({props:e,name:"MuiDivider"}),a=r.absolute,l=void 0!==a&&a,c=r.children,p=r.className,v=r.component,Z=void 0===v?c?"div":"hr":v,g=r.flexItem,j=void 0!==g&&g,b=r.light,w=void 0!==b&&b,y=r.orientation,P=void 0===y?"horizontal":y,S=r.role,A=void 0===S?"hr"!==Z?"separator":void 0:S,C=r.textAlign,I=void 0===C?"center":C,k=r.variant,R=void 0===k?"fullWidth":k,V=(0,n.Z)(r,x),N=(0,i.Z)({},r,{absolute:l,component:Z,flexItem:j,light:w,orientation:P,role:A,textAlign:I,variant:R}),W=function(e){var t=e.absolute,r=e.children,n=e.classes,i=e.flexItem,a=e.light,o=e.orientation,l=e.textAlign,c={root:["root",t&&"absolute",e.variant,a&&"light","vertical"===o&&"vertical",i&&"flexItem",r&&"withChildren",r&&"vertical"===o&&"withChildrenVertical","right"===l&&"vertical"!==o&&"textAlignRight","left"===l&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]};return(0,s.Z)(c,u.V,n)}(N);return(0,h.jsx)(m,(0,i.Z)({as:Z,className:(0,o.Z)(W.root,p),role:A,ref:t,ownerState:N},V,{children:c?(0,h.jsx)(f,{className:W.wrapper,ownerState:N,children:c}):null}))}));t.Z=p}}]);
//# sourceMappingURL=78.f4ee1ee5.chunk.js.map