"use strict";(self.webpackChunkoh_food=self.webpackChunkoh_food||[]).push([[411],{20411:function(e,r,n){n.r(r),n.d(r,{default:function(){return G}});var t=n(45987),s=n(15861),a=n(1413),i=n(29439),d=n(87757),l=n.n(d),c=n(68870),o=n(10266),u=n(4841),x=n(4567),h=n(99947),m=n(85982),Z=n(36053),f=n(5849),p=n(72791),j=n(61134),v=n(81153),b=n(93006),y=n(80184);function g(e){var r,n=(0,j.bc)((0,a.Z)((0,a.Z)({},e),{},{defaultValue:""})),t=n.fieldState,s=n.field;return(0,y.jsx)(b.Z,(0,a.Z)((0,a.Z)((0,a.Z)({},e),s),{},{multiline:e.multiline,rows:e.rows,type:e.type,fullWidth:!0,variant:"outlined",error:!!t.error,helperText:null===(r=t.error)||void 0===r?void 0:r.message}))}var k=n(25801),w=n(13034);function P(e){var r=(0,j.bc)((0,a.Z)((0,a.Z)({},e),{},{defaultValue:!1})).field;return(0,y.jsx)(k.Z,{control:(0,y.jsx)(w.Z,(0,a.Z)((0,a.Z)({},r),{},{checked:r.value,color:"secondary",disabled:e.disabled})),label:e.label})}function S(){var e=(0,j.Gc)(),r=e.control,n=e.formState;return(0,y.jsxs)(c.Z,{maxWidth:800,sx:{mx:"auto"},children:[(0,y.jsx)(x.Z,{variant:"h6",sx:{mb:3},children:"Shipping address"}),(0,y.jsxs)(v.ZP,{container:!0,spacing:3,children:[(0,y.jsx)(v.ZP,{item:!0,xs:12,sm:12,children:(0,y.jsx)(g,{control:r,name:"fullName",label:"Full name"})}),(0,y.jsx)(v.ZP,{item:!0,xs:12,md:8,children:(0,y.jsx)(g,{control:r,name:"address1",label:"Address"})}),(0,y.jsx)(v.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,y.jsx)(g,{control:r,name:"city",label:"City"})}),(0,y.jsx)(v.ZP,{item:!0,xs:12,children:(0,y.jsx)(P,{disabled:!n.isDirty,name:"saveAddress",label:"Save this as the default address",control:r})})]})]})}var A=n(43236),C=n(52411),R=n(36474),V=n(89369);function _(){var e=(0,R.CG)((function(e){return e.basket})),r=e.basket,n=e.status;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(x.Z,{variant:"h6",gutterBottom:!0,children:"Order summary"}),r&&(0,y.jsx)(A.Z,{children:r.items.map((function(e){return(0,y.jsx)(C.ZP,{sx:{},children:(0,y.jsx)(V.Z,{item:e,status:n})},e.productId)}))}),(0,y.jsxs)(v.ZP,{container:!0,children:[(0,y.jsx)(v.ZP,{item:!0,xs:6}),(0,y.jsx)(v.ZP,{item:!0,xs:6})]})]})}var F=n(61265),N=n(62797),W=N.Ry({fullName:N.Z_().required("Please enter your name"),address1:N.Z_().required("Please enter your address"),city:N.Z_().required()}),q=n(30260),O=n(94446),T=n(32068),B=["saveAddress"],E=["Address","Review","Receipt"];function G(){var e=(0,p.useState)(0),r=(0,i.Z)(e,2),n=r[0],d=r[1],v=(0,p.useState)(0),b=(0,i.Z)(v,2),g=b[0],k=b[1],w=(0,p.useState)(!1),P=(0,i.Z)(w,2),A=P[0],C=P[1],V=(0,R.TL)();var N=(0,j.cI)({mode:"all",resolver:(0,F.X)(W)});function G(e){return I.apply(this,arguments)}function I(){return(I=(0,s.Z)(l().mark((function e(r){var n,s,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),n=r.saveAddress,s=(0,t.Z)(r,B),e.prev=2,e.next=5,q.Z.Orders.create({saveAddress:n,shippingAddress:s});case 5:a=e.sent,k(a),V((0,T.RT)()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:return e.prev=13,C(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})))).apply(this,arguments)}(0,p.useEffect)((function(){q.Z.Account.fetchAddress().then((function(e){e&&N.reset((0,a.Z)((0,a.Z)((0,a.Z)({},N.getValues()),e),{},{saveAddress:!1}))}))}),[N]);var D=function(){var e=(0,s.Z)(l().mark((function e(r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==n){e.next=5;break}return e.next=3,G(r);case 3:e.next=6;break;case 5:d(n+1);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,y.jsx)(c.Z,{className:"payment",children:(0,y.jsx)(o.Z,{sx:{pt:7},children:(0,y.jsx)(j.RV,(0,a.Z)((0,a.Z)({},N),{},{children:(0,y.jsxs)(u.Z,{variant:"outlined",sx:{maxWidth:800,my:{xs:3,md:6},mx:"auto",p:{xs:2,md:3},backgroundColor:"rgba(0,0,0,0.5)"},children:[(0,y.jsx)(x.Z,{component:"h1",variant:"h4",align:"center",children:"Order"}),(0,y.jsx)(h.Z,{activeStep:n,sx:{pt:3,pb:5},children:E.map((function(e){return(0,y.jsx)(m.Z,{children:(0,y.jsx)(Z.Z,{children:e})},e)}))}),(0,y.jsx)(y.Fragment,{children:n===E.length?(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(x.Z,{variant:"subtitle1",children:["Your order number is #",g,". We have emailed your order confirmation, and will not send you an update when your order has shipped!"]})}):(0,y.jsxs)("form",{onSubmit:N.handleSubmit(D),children:[function(e){switch(e){case 0:return(0,y.jsx)(S,{});case 1:return(0,y.jsx)(_,{});default:throw new Error("Unknown step")}}(n),(0,y.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[0!==n&&(0,y.jsx)(f.Z,{onClick:function(){d(n-1)},sx:{mt:3,ml:1},children:"Back"}),(0,y.jsx)(O.Z,{loading:A,disabled:!N.formState.isValid,variant:"contained",type:"submit",sx:{mt:3,ml:1},children:n===E.length-1?"Place order":"Next"})]})]})})]})}))})})}}}]);
//# sourceMappingURL=411.cf552d21.chunk.js.map