"use strict";(self.webpackChunkoh_food=self.webpackChunkoh_food||[]).push([[411],{20411:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var r=t(45987),s=t(15861),i=t(1413),a=t(29439),d=t(87757),c=t.n(d),l=t(68870),o=t(4567),u=t(10266),x=t(4841),h=t(99947),m=t(85982),Z=t(36053),j=t(5849),f=t(72791),p=t(61134),v=t(81153),y=t(93006),b=t(80184);function g(e){var n,t=(0,p.bc)((0,i.Z)((0,i.Z)({},e),{},{defaultValue:""})),r=t.fieldState,s=t.field;return(0,b.jsx)(y.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},e),s),{},{multiline:e.multiline,rows:e.rows,type:e.type,fullWidth:!0,variant:"outlined",error:!!r.error,helperText:null===(n=r.error)||void 0===n?void 0:n.message}))}var w=t(25801),P=t(13034);function k(e){var n=(0,p.bc)((0,i.Z)((0,i.Z)({},e),{},{defaultValue:!1})).field;return(0,b.jsx)(w.Z,{control:(0,b.jsx)(P.Z,(0,i.Z)((0,i.Z)({},n),{},{checked:n.value,color:"secondary",disabled:e.disabled})),label:e.label})}function C(){var e=(0,p.Gc)(),n=e.control,t=e.formState;return(0,b.jsxs)(l.Z,{maxWidth:800,sx:{mx:"auto"},children:[(0,b.jsx)(o.Z,{variant:"h6",sx:{mb:3},children:"Shipping address"}),(0,b.jsxs)(v.ZP,{container:!0,spacing:3,children:[(0,b.jsx)(v.ZP,{item:!0,xs:12,sm:12,children:(0,b.jsx)(g,{control:n,name:"fullName",label:"Full name"})}),(0,b.jsx)(v.ZP,{item:!0,xs:12,md:8,children:(0,b.jsx)(g,{control:n,name:"address1",label:"Address"})}),(0,b.jsx)(v.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,b.jsx)(g,{control:n,name:"city",label:"City"})}),(0,b.jsx)(v.ZP,{item:!0,xs:12,children:(0,b.jsx)(k,{disabled:!t.isDirty,name:"saveAddress",label:"Save as the default address",control:n})})]})]})}var I=t(43236),S=t(52411),A=t(94721),q=t(53767),O=t(36474),R=t(92675),V=t(51365),F=t(32068);function T(){var e,n=(0,O.CG)((function(e){return e.basket})),t=n.basket,r=n.status,s=null!==(e=null===t||void 0===t?void 0:t.items.reduce((function(e,n){return e+n.quantity*n.price}),0))&&void 0!==e?e:0,i=(0,O.TL)();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Order summary"}),t&&(0,b.jsx)(I.Z,{children:t.items.map((function(e){return(0,b.jsx)(S.ZP,{sx:{mb:0},children:(0,b.jsxs)(v.ZP,{container:!0,spacing:2,rowSpacing:0,children:[(0,b.jsx)(v.ZP,{md:2,xs:0,item:!0,sx:{overflow:"hidden"},display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsx)(l.Z,{component:"img",src:e.pictureUrl,alt:e.name,sx:{height:"50px",width:"50px",objectFit:"contain",objectPosition:"center"}})}),(0,b.jsxs)(v.ZP,{item:!0,md:5,xs:8,display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"column",columnGap:3,children:[(0,b.jsx)(o.Z,{variant:"caption",children:e.category}),(0,b.jsx)(o.Z,{variant:"subtitle1",children:e.name})]}),(0,b.jsx)(v.ZP,{item:!0,md:3,xs:6,display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsx)(V.Z,{quantity:e.quantity,increase:function(){return i((0,F.JW)({productId:e.productId}))},decrease:function(){return i((0,F.di)({productId:e.productId,quantity:1,name:"rem"}))},isRow:!0,minValue:1,loading:r.includes("pending")})}),(0,b.jsx)(v.ZP,{item:!0,md:2,xs:6,sx:{overflow:"hidden"},display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsx)(o.Z,{textAlign:"center",children:(0,R.O)(e.price*e.quantity,"$")})})]})},e.productId)}))}),(0,b.jsx)(A.Z,{}),(0,b.jsxs)(v.ZP,{container:!0,children:[(0,b.jsx)(v.ZP,{item:!0,md:6,xs:0}),(0,b.jsx)(v.ZP,{item:!0,xs:12,md:6,children:(0,b.jsx)(u.Z,{children:(0,b.jsxs)(I.Z,{dense:!0,children:[(0,b.jsx)(S.ZP,{children:(0,b.jsxs)(q.Z,{width:"100%",direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,b.jsx)(o.Z,{variant:"caption",children:"Subtotal"}),(0,b.jsx)(o.Z,{variant:"subtitle1",children:(0,R.O)(s,"$")})]})}),(0,b.jsx)(S.ZP,{children:(0,b.jsxs)(q.Z,{width:"100%",direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,b.jsx)(o.Z,{variant:"caption",children:"Delivery Cost"}),(0,b.jsx)(o.Z,{variant:"subtitle1",children:(0,R.O)(30,"$")})]})}),(0,b.jsx)(S.ZP,{children:(0,b.jsxs)(q.Z,{width:"100%",direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,b.jsx)(o.Z,{variant:"caption",children:"Total"}),(0,b.jsx)(o.Z,{variant:"subtitle1",children:(0,R.O)(s+30,"$")})]})})]})})})]})]})}var W=t(61265),_=t(62797),D=_.Ry({fullName:_.Z_().required("Please enter your name"),address1:_.Z_().required("Please enter your address"),city:_.Z_().required()}),N=t(30260),$=t(94446),G=t(43504),U=["saveAddress"],Y=["Address","Review","Receipt"];function B(){var e=(0,f.useState)(0),n=(0,a.Z)(e,2),t=n[0],d=n[1],v=(0,f.useState)(0),y=(0,a.Z)(v,2),g=y[0],w=y[1],P=(0,f.useState)(!1),k=(0,a.Z)(P,2),I=k[0],S=k[1],A=(0,O.TL)();var q=(0,p.cI)({mode:"all",resolver:(0,W.X)(D)});function R(e){return V.apply(this,arguments)}function V(){return(V=(0,s.Z)(c().mark((function e(n){var s,i,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),s=n.saveAddress,i=(0,r.Z)(n,U),e.prev=2,e.next=5,N.Z.Orders.create({saveAddress:s,shippingAddress:i});case 5:a=e.sent,w(a),d(t+1),A((0,F.RT)()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:return e.prev=14,S(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))).apply(this,arguments)}(0,f.useEffect)((function(){N.Z.Profile.fetchDefaultAddress().then((function(e){e&&q.reset((0,i.Z)((0,i.Z)((0,i.Z)({},q.getValues()),e),{},{saveAddress:!1}))}))}),[q]);var _=function(){var e=(0,s.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t){e.next=5;break}return e.next=3,R(n);case 3:e.next=6;break;case 5:d(t+1);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,b.jsx)(l.Z,{className:"payment",sx:{pb:{xs:10,md:1},pt:{xs:1,md:7}},children:(0,b.jsx)(u.Z,{children:(0,b.jsx)(p.RV,(0,i.Z)((0,i.Z)({},q),{},{children:(0,b.jsxs)(x.Z,{variant:"outlined",sx:{maxWidth:800,my:{xs:1,md:6},mx:"auto",p:{xs:2,md:3},backgroundColor:"rgba(0,0,0,0.5)"},children:[(0,b.jsx)(o.Z,{component:"h1",variant:"h4",align:"center",children:"Order"}),(0,b.jsx)(h.Z,{activeStep:t,sx:{pt:3,pb:5},children:Y.map((function(e){return(0,b.jsx)(m.Z,{children:(0,b.jsx)(Z.Z,{children:e})},e)}))}),(0,b.jsx)(b.Fragment,{children:t===Y.length?(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(o.Z,{variant:"subtitle1",children:["Your order number is #",g,". We have emailed your order confirmation, and will not send you an update when your order has shipped!"]})}):(0,b.jsxs)("form",{onSubmit:q.handleSubmit(_),children:[function(e){switch(e){case 0:return(0,b.jsx)(C,{});case 1:return(0,b.jsx)(T,{});case 2:return(0,b.jsx)(l.Z,{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:(0,b.jsx)(o.Z,{textAlign:"center",children:"You order has been sent, You will be notified on confirmation and delivery."})});default:throw new Error("Unknown step")}}(t),(0,b.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[0!==t&&(0,b.jsx)(j.Z,{onClick:function(){d(t-1)},sx:{mt:3,ml:1},children:"Back"}),2!==t?(0,b.jsx)($.Z,{loading:I,disabled:!q.formState.isValid,variant:"contained",type:"submit",sx:{mt:3,ml:1},children:1===t?"Place order":"Next"}):(0,b.jsx)(j.Z,{variant:"contained",sx:{mt:3,ml:1},component:G.rU,to:"/",children:"Home"})]})]})})]})}))})})}}}]);
//# sourceMappingURL=411.d5601564.chunk.js.map